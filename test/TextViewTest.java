import org.junit.Before;
import org.junit.Test;

import java.io.IOException;
import java.io.StringReader;
import java.util.Random;

import controller.Controller;
import maze.MazeGame;
import maze.NormalMazeGame;
import maze.Room;
import maze.generator.MazeGenerator;
import maze.generator.WrappedNonPerfectMaze;
import view.MazeView;
import view.TextView;
import visualizer.MazeVisualizer;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotEquals;

/**
 * Tests for {@link TextView}.
 */
public class TextViewTest {

  private Controller controller;
  private MazeView view;

  @Before public void setup() {
    controller = new Controller();
  }

  // maze copy
  @Test
  public void copyMaze() {
    MazeGenerator mazeGenerator =
            new WrappedNonPerfectMaze(
                    5, 6, 0.5, 0.5, 1, 7, true);
    MazeGame mazeGame = new NormalMazeGame(
            mazeGenerator.getMap(), true, "*", new Random(1));
    Room[][] mazeCopy = mazeGame.copyMaze();
    mazeGame.playerMove("up");
    assertNotEquals(mazeGame.toString(), MazeVisualizer.visualizer(mazeCopy));
  }

  /*
  Configuration
   */
  @Test public void invalidRow() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("asddsa\n3\n3\n3\n0\n0\ny\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Error: For input string: \"asddsa\"\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  @Test public void invalidCol() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\nasdsad\n3\n3\n3\n0\n0\ny\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Error: For input string: \"asdsad\"\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  @Test public void invalidWall() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\nasdsad\n3\n3\n3\n0\n0\ny\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Error: For input string: \"asdsad\"\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  @Test public void invalidBat() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\nasdsad\n3\n3\n3\n0\n0\ny\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Error: For input string: \"asdsad\"\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  @Test public void invalidPit() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\n0\nasdsad\n3\n3\n3\n0\n0\ny\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Error: For input string: \"asdsad\"\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  @Test public void invalidSinglePlayer() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\n0\n0\nasdsad\n3\n3\n3\n0\n0\ny\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "\t- Error: invalid command asdsad.\n"
                    + "\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "\t- Error: invalid command 3.\n"
                    + "\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "\t- Error: invalid command 3.\n"
                    + "\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "\t- Error: invalid command 3.\n"
                    + "\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "\t- Error: invalid command 0.\n"
                    + "\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "\t- Error: invalid command 0.\n"
                    + "\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }


  /*
  One player mode
   */
  @Test public void onePlayerMode() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\n0\n0\ny\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
  Restart with the same map, but different player location
   */
  @Test public void restart() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("4\n4\n3\n0\n0\ny\nrestart\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "      ***           \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                *** \n"
                    + "               U   U\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
  New game, need to configure again.
 */
  @Test public void newGame() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("4\n4\n3\n0\n0\ny\nnew\n3\n3\n3\n0\n0\ny\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "      ***           \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     UUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
  Player is carried away by a bat.
*/
  @Test public void carriedByBat() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("4\n5\n5\n0.5\n0\ny\n"
            + "m\na\nm\na\nm\nw\nm\nd\nm\na\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "               U   U     \n"
                    + "                ***      \n"
                    + "               UUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, left, right].\n"
                    + "- You hear flapping nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "          UUUUUU   U     \n"
                    + "           ***           \n"
                    + "          UUUUUUUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "     U   UUUUUUU   U     \n"
                    + "      ***                \n"
                    + "     UUUUUUUUUUUUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, left, right].\n"
                    + "- You hear flapping nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "     UUUUU               \n"
                    + "      ***                \n"
                    + "     U   U               \n"
                    + "     U   UUUUUUU   U     \n"
                    + "                         \n"
                    + "     UUUUUUUUUUUUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Super bats missed you.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You hear flapping nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "     UUUUUU   U          \n"
                    + "       B   ***           \n"
                    + "     U   UUUUUU          \n"
                    + "     U   UUUUUUU   U     \n"
                    + "                         \n"
                    + "     UUUUUUUUUUUUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, left, right].\n"
                    + "- You hear flapping nearby.\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                         \n"
                    + "                         \n"
                    + "                         \n"
                    + "          U   U          \n"
                    + "          U W            \n"
                    + "          U   U          \n"
                    + "     UUUUUU   U          \n"
                    + "       B                 \n"
                    + "     U   UUUUUU          \n"
                    + "     U   UUUUUUU   U     \n"
                    + "                         \n"
                    + "     UUUUUUUUUUUUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Super bats carried you to [1, 2].\n"
                    + "- You are swallowed by the wumpus.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- You are swallowed by the wumpus.                                        "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
  Player falls into a pit.
*/
  @Test public void killedByPit() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("4\n4\n5\n0\n0.5\ny\n"
            + "m\na\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "          U   U     \n"
                    + "           ***      \n"
                    + "          U   U     \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You feel a breeze nearby.\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "     U   UU   U     \n"
                    + "       P            \n"
                    + "     U   UU   U     \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You fall into the bottomless pit.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- You fall into the bottomless pit.                                       "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
  Player is killed by a wumpus
*/
  @Test public void killedByWumpus() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("4\n4\n5\n0\n0\ny\n"
            + "m\nw\nm\na\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                *** \n"
                    + "               U   U\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                *** \n"
                    + "               U   U\n"
                    + "               U   U\n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "          U   UU   U\n"
                    + "            W       \n"
                    + "          U   UU   U\n"
                    + "               U   U\n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You are swallowed by the wumpus.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- You are swallowed by the wumpus.                                        "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Player kills the wumpus.
*/
  @Test public void killWumpus() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("4\n4\n5\n0\n0\ny\n"
            + "m\nw\na\na\n1\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                *** \n"
                    + "               U   U\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                *** \n"
                    + "               U   U\n"
                    + "               U   U\n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                *** \n"
                    + "               U   U\n"
                    + "               U   U\n"
                    + "                    \n"
                    + "               U   U\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 2 arrows left.\n"
                    + "- Great! You killed the wumpus.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- Great! You killed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Player kills the wumpus and arrow flies through a tunnel.
*/
  @Test public void killsWumpusThroughTunnel() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("4\n4\n8\n0\n0\ny\n"
            + "m\nw\nm\nw\nm\nd\nm\nw\nm\na\nm\na\nm\na\nm\nd\na\na\n1\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "      ***           \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "      ***           \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "      ***           \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    \n"
                    + "                    \n"
                    + "                    \n"
                    + "     UUUUUU   U     \n"
                    + "           ***      \n"
                    + "     U   UU   U     \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU     \n"
                    + "           ***U     \n"
                    + "          U   U     \n"
                    + "     UUUUUU   U     \n"
                    + "                    \n"
                    + "     U   UU   U     \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU     \n"
                    + "      ***     U     \n"
                    + "     UUUUUU   U     \n"
                    + "     UUUUUU   U     \n"
                    + "                    \n"
                    + "     U   UU   U     \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "UUUUUUUUUUUUUUU     \n"
                    + " ***          U     \n"
                    + "UUUUUUUUUUU   U     \n"
                    + "     UUUUUU   U     \n"
                    + "                    \n"
                    + "     U   UU   U     \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "UUUUUUUUUUUUUUUUUUUU\n"
                    + "              UU*** \n"
                    + "UUUUUUUUUUU   UU   U\n"
                    + "     UUUUUU   U     \n"
                    + "                    \n"
                    + "     U   UU   U     \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "UUUUUUUUUUUUUUUUUUUU\n"
                    + " ***          UU    \n"
                    + "UUUUUUUUUUU   UU   U\n"
                    + "     UUUUUU   U     \n"
                    + "                    \n"
                    + "     U   UU   U     \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "UUUUUUUUUUUUUUUUUUUU\n"
                    + " ***          UU    \n"
                    + "UUUUUUUUUUU   UU   U\n"
                    + "     UUUUUU   U     \n"
                    + "                    \n"
                    + "     U   UU   U     \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     U   U          \n"
                    + "     U   U          \n"
                    + "                    \n"
                    + "     UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 2 arrows left.\n"
                    + "- Great! You killed the wumpus.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- Great! You killed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Player kills the wumpus and arrow flies through a tunnel.
*/
  @Test public void killsWumpusThroughRoom() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "a\nd\n2\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 2 arrows left.\n"
                    + "- Great! You killed the wumpus.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- Great! You killed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Player misses the wumpus because the distance is too large.
*/
  @Test public void distanceTooLarge() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "a\na\n2\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 2 arrows left.\n"
                    + "- Your arrow missed the wumpus.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Invalid command.
*/
  @Test public void invalidCommand() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "sdwasdwa\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Error: unknown command sdwasdwa.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Invalid moving direction.
*/
  @Test public void invalidMovingDirection() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "m\nsdwasdwa\ns\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Error: unknown command sdwasdwa.\n"
                    + "\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "               \n"
                    + "          U   U\n"
                    + "          U   U\n"
                    + "          U*** \n"
                    + "          UUUUU\n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Valid but not reachable direction.
*/
  @Test public void unreachableMovingDirection() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "m\nw\ns\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Error: - You cannot move up.\n"
                    + "\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "               \n"
                    + "          U   U\n"
                    + "          U   U\n"
                    + "          U*** \n"
                    + "          UUUUU\n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Valid move.
*/
  @Test public void validMove() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "m\ns\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "               \n"
                    + "          U   U\n"
                    + "          U   U\n"
                    + "          U*** \n"
                    + "          UUUUU\n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Valid arrow shot.
*/
  @Test public void validShot() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "a\na\n1\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 2 arrows left.\n"
                    + "- Great! You killed the wumpus.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- Great! You killed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Arrow hits wall.
*/
  @Test public void arrowHitsWall() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "a\nw\n1\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.\n"
                    + "- You have 2 arrows left.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Invalid arrow shooting direction
*/
  @Test public void invalidArrowShootingDirection() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "a\nasdasd\nw\n1\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Error: unknown command asdasd.\n"
                    + "\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.\n"
                    + "- You have 2 arrows left.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }


  /*
Invalid arrow shooting distance
*/
  @Test public void invalidArrowShootingDistance() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "a\nw\nasdas\nw\n1\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "\t- Error: invalid distance.\n"
                    + "\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.\n"
                    + "- You have 2 arrows left.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Use all the arrows and lose the game.
*/
  @Test public void useAllArrows() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "a\nw\n1\na\nw\n1\na\nw\n1\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.\n"
                    + "- You have 2 arrows left.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.\n"
                    + "- You have 1 arrows left.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "               \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.\n"
                    + "- You don't have any arrow left.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- You don't have any arrow left.                                          "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }


  /*
Smell the wumpus.
*/
  @Test public void smellWumpus() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n4\n0\n0\ny\n"
            + "m\ns\nm\nw\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "               \n"
                    + "          U   U\n"
                    + "          U   U\n"
                    + "          U*** \n"
                    + "          UUUUU\n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          UUUUU\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "          U   U\n"
                    + "          U    \n"
                    + "          UUUUU\n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Smell the wumpus through hallway.
*/
  @Test public void smellWumpusThroughHallway() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("2\n7\n5\n0\n0\ny\n"
            + "m\nw\nm\nd\nm\nd\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                                   \n"
                    + "                                   \n"
                    + "                                   \n"
                    + "                    U   U          \n"
                    + "                     ***           \n"
                    + "                    UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    UUUUU          \n"
                    + "                    U***           \n"
                    + "                    U   U          \n"
                    + "                    U   U          \n"
                    + "                                   \n"
                    + "                    UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    UUUUUUUUUU     \n"
                    + "                    U     ***      \n"
                    + "                    U   UUUUUU     \n"
                    + "                    U   U          \n"
                    + "                                   \n"
                    + "                    UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                    UUUUUUUUUUUUUUU\n"
                    + "                    U           W  \n"
                    + "                    U   UUUUUUU   U\n"
                    + "                    U   U          \n"
                    + "                                   \n"
                    + "                    UUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You are swallowed by the wumpus.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- You are swallowed by the wumpus.                                        "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Sense the pit.
*/
  @Test public void sensePit() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n0\n0\n0.7\ny\n"
            + "m\na\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You feel a breeze nearby.\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "U   UU   U     \n"
                    + "  P            \n"
                    + "U   UU   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You fall into the bottomless pit.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- You fall into the bottomless pit.                                       "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Sense the pit through a hallway.
*/
  @Test public void sensePitThroughHallway() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("2\n7\n8\n0\n0.3\ny\n"
            + "m\nd\nm\nd\nm\nd\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                                   \n"
                    + "                                   \n"
                    + "                                   \n"
                    + "               U   U               \n"
                    + "                ***                \n"
                    + "               UUUUU               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, left, right].\n"
                    + "- You feel a breeze nearby.\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                                   \n"
                    + "                                   \n"
                    + "                                   \n"
                    + "               U   UU   U          \n"
                    + "                     ***           \n"
                    + "               UUUUUUUUUU          \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, left, right].\n"
                    + "- You feel a breeze nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                                   \n"
                    + "                                   \n"
                    + "                                   \n"
                    + "               U   UU   UUUUUU     \n"
                    + "                          ***      \n"
                    + "               UUUUUUUUUUUUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [left, right].\n"
                    + "- You feel a breeze nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "                                   \n"
                    + "                                   \n"
                    + "                                   \n"
                    + "               U   UU   UUUUUUU   U\n"
                    + "                                P  \n"
                    + "               UUUUUUUUUUUUUUUUUUUU\n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You fall into the bottomless pit.\n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.\n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- You fall into the bottomless pit.                                       "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Wrapping move.
*/
  @Test public void wrappingMove() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n0\n0\n0\ny\n"
            + "m\na\nm\na\nm\na\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "          U   U\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   UU   U\n"
                    + "      ***      \n"
                    + "     U   UU   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "- You smell a wumpus nearby.\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "U   UU   UU   U\n"
                    + " ***           \n"
                    + "U   UU   UU   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "U   UU   UU   U\n"
                    + "           *** \n"
                    + "U   UU   UU   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].\n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
  Two player mode.
   */
  @Test public void twoPlayer() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n0\n0\n0\nn\n"
            + "q");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUU     \n"
                    + "      ///      \n"
                    + "     U   U     \n"
                    + "          U   U\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Two players take turns to move.
 */
  @Test public void twoPlayerMoveTakeTurn() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n0\n0\n0\nn\n"
            + "m\nw\nm\ns\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUU     \n"
                    + "      ///      \n"
                    + "     U   U     \n"
                    + "          U   U\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "      ///  *** \n"
                    + "     U   UU   U\n"
                    + "          U   U\n"
                    + "               \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].            - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "           *** \n"
                    + "     U   UU   U\n"
                    + "     U   UU   U\n"
                    + "      ///      \n"
                    + "     U   UU   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].            - You can move to [up, "
                    + "down, left, right].        \n"
                    + "                                                  - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Shooting does not switch.
*/
  @Test public void shootingNoSwitch() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n0\n0\n0\nn\n"
            + "a\nw\n1\na\nw\n1\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUU     \n"
                    + "      ///      \n"
                    + "     U   U     \n"
                    + "          U   U\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUU     \n"
                    + "      ///      \n"
                    + "     U   U     \n"
                    + "          U   U\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 2 arrows left.                                                 "
                    + "                          \n"
                    + "- Your arrow missed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUU     \n"
                    + "      ///      \n"
                    + "     U   U     \n"
                    + "          U   U\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 1 arrows left.                                                 "
                    + "                          \n"
                    + "- Your arrow missed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
Two players cross each other.
*/
  @Test public void playersCrossEachOther() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n0\n0\n0\nn\n"
            + "m\nw\nm\nd\nm\na\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUU     \n"
                    + "      ///      \n"
                    + "     U   U     \n"
                    + "          U   U\n"
                    + "           *** \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "      ///  *** \n"
                    + "     U   UU   U\n"
                    + "          U   U\n"
                    + "               \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].            - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "           /// \n"
                    + "     U   UU   U\n"
                    + "          U   U\n"
                    + "               \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].            - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "      ***  /// \n"
                    + "     U   UU   U\n"
                    + "          U   U\n"
                    + "               \n"
                    + "          U   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, left, right].            - You can move to [down,"
                    + " left, right].            \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
One player dies, game will not be over.
*/
  @Test public void onePlayerDiesGameNotOver() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\n0\n0.2\nn\n"
            + "m\nd\nm\ns\nm\nw\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "U   U          \n"
                    + " ***           \n"
                    + "U   U          \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You smell a wumpus nearby.                      - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "U   UU   U     \n"
                    + "      ***      \n"
                    + "U   UU   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You feel a breeze nearby.                       - You smell a wumpus "
                    + "nearby.                      \n"
                    + "- You smell a wumpus nearby.                                              "
                    + "                          \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "               \n"
                    + "          U   U\n"
                    + "U   UU   UU   U\n"
                    + "      ***   W  \n"
                    + "U   UU   UU   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                  - You are swallowed by "
                    + "the wumpus.                \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - Game over.            "
                    + "                          \n"
                    + "- You feel a breeze nearby.                                               "
                    + "                          \n"
                    + "- You smell a wumpus nearby.                                              "
                    + "                          \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U***      \n"
                    + "     U   UU   U\n"
                    + "U   UU   UU   U\n"
                    + "            W  \n"
                    + "U   UU   UU   U\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, right].                  - Game over.            "
                    + "                          \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
One player shoots the wumpus, game over.
*/
  @Test public void onePlayerShootsWumpusGameOver() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\n0\n0.2\nn\n"
            + "m\nd\na\ns\n1\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "U   U          \n"
                    + " ***           \n"
                    + "U   U          \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You smell a wumpus nearby.                      - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "U   UU   U     \n"
                    + "      ***      \n"
                    + "U   UU   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You feel a breeze nearby.                       - You smell a wumpus "
                    + "nearby.                      \n"
                    + "- You smell a wumpus nearby.                                              "
                    + "                          \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "U   UU   U     \n"
                    + "      ***      \n"
                    + "U   UU   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                  - You have 2 arrows left"
                    + ".                         \n"
                    + "                                                  - Great! You killed the "
                    + "wumpus.                   \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.                                      - Game over.            "
                    + "                          \n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "                                                  - Great! You killed the "
                    + "wumpus.                   \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
One player uses up all arrows, the other player passes his position.
*/
  @Test public void onePlayerUsesAllArrows() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\n0\n0\nn\n"
            + "a\na\n1\na\na\n1\na\na\n1\nm\na\nm\ns\nm\ns\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You smell a wumpus nearby.                      - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 2 arrows left.                                                 "
                    + "                          \n"
                    + "- Your arrow missed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You smell a wumpus nearby.                      - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 1 arrows left.                                                 "
                    + "                          \n"
                    + "- Your arrow missed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You smell a wumpus nearby.                      - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "     U   U     \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 0 arrows left.                                                 "
                    + "                          \n"
                    + "- Your arrow missed the wumpus.                                           "
                    + "                          \n"
                    + "- You don't have any arrow left.                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.                                      - You can move to [down,"
                    + " left, right].            \n"
                    + "                                                  - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U///      \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.                                      - You can move to [down,"
                    + " right].                  \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U         \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "      ///      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.                                      - You can move to [up, "
                    + "down, left, right].        \n"
                    + "                                                  - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U         \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "     U   U     \n"
                    + "     U///U     \n"
                    + "     UUUUU     \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.                                      - You can move to [up]. "
                    + "                          \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }

  /*
One player shoots an arrow that passes the other player, and kills the wumpus.
*/
  @Test public void onePlayerShootsArrowKillsWumpus() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\n0\n0\nn\n"
            + "restart\nm\na\nm\nw\na\nd\n2\n3");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You smell a wumpus nearby.                      - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "     U   U     \n"
                    + "     U///U     \n"
                    + "     UUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [up]. "
                    + "                          \n"
                    + "- You smell a wumpus nearby.                                              "
                    + "                          \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "U   UU   U     \n"
                    + " ***           \n"
                    + "U   UU   U     \n"
                    + "     U   U     \n"
                    + "     U///U     \n"
                    + "     UUUUU     \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [up]. "
                    + "                          \n"
                    + "- You smell a wumpus nearby.                                              "
                    + "                          \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "U   UU   U     \n"
                    + " ***  ///      \n"
                    + "U   UU   U     \n"
                    + "     U   U     \n"
                    + "     U   U     \n"
                    + "     UUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [up, "
                    + "down, left, right].        \n"
                    + "- You smell a wumpus nearby.                      - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "U   UU   U     \n"
                    + " ***  ///      \n"
                    + "U   UU   U     \n"
                    + "     U   U     \n"
                    + "     U   U     \n"
                    + "     UUUUU     \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You have 2 arrows left.                                                 "
                    + "                          \n"
                    + "- Great! You killed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.                                      - Game over.            "
                    + "                          \n"
                    + "\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Game Over:\n"
                    + "\n"
                    + "- Player1                                         - Player 2              "
                    + "                          \n"
                    + "- Great! You killed the wumpus.                                           "
                    + "                          \n"
                    + "\n"
                    + "- What do you want to do next:\n"
                    + "\t- 1. Restart\n"
                    + "\t- 2. New Game\n"
                    + "\t- 3. Quit\n";
    assertEquals(expected, out.toString());
  }

  /*
Two players in the same location. One player uses up all the arrows, loses the game. The other
player moves again.
*/
  @Test public void onePlayerUsesAllArrowsSameLocation() throws IOException {
    StringBuffer out = new StringBuffer();
    Readable in = new StringReader("3\n3\n3\n0\n0\nn\n"
            + "m\nw\nm\na\na\na\n1\na\na\n1\na\na\n1\nm\ns\nq");
    MazeView view = new TextView(in, out);
    controller.execute(view);
    String expected =
            "============================================================\n"
                    + "\n"
                    + "- Hunt the Wumpus -\n"
                    + "- Configuration\n"
                    + "\t- Number of Rows:\n"
                    + "\t- Number of Columns:\n"
                    + "\t- Number of Walls:\n"
                    + "\t- Proportion of Bat Rooms, [0, 1):\n"
                    + "\t- Proportion of Pit Rooms, [0, 1)\n"
                    + "\t- Single Player? (yes/no)\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "          UUUUU\n"
                    + "           /// \n"
                    + "          U   U\n"
                    + "     U   U     \n"
                    + "      ***      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [up, down, left, right].        - You can move to [down,"
                    + " left, right].            \n"
                    + "- You smell a wumpus nearby.                      - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U***  /// \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, right].                  - You can move to [down,"
                    + " left, right].            \n"
                    + "                                                  - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U///      \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, right].                  - You can move to [down,"
                    + " right].                  \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U///      \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.                                               "
                    + "                          \n"
                    + "- You have 2 arrows left.                                                 "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, right].                  - You can move to [down,"
                    + " right].                  \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U///      \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 1's Turn ***\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.                                               "
                    + "                          \n"
                    + "- You have 1 arrows left.                                                 "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- You can move to [down, right].                  - You can move to [down,"
                    + " right].                  \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "\t- Enter shooting distance:\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U///      \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "               \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Your arrow hits the wall.                                               "
                    + "                          \n"
                    + "- You don't have any arrow left.                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.                                      - You can move to [down,"
                    + " right].                  \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n"
                    + "\t- Enter direction using 'up', 'left', 'down', 'right' (or 'w', 'a', 's',"
                    + " 'd'):\n"
                    + "============================================================\n"
                    + "\n"
                    + "- Maze:\n"
                    + "\n"
                    + "     UUUUUUUUUU\n"
                    + "     U         \n"
                    + "     U   UU   U\n"
                    + "     U   U     \n"
                    + "      ///      \n"
                    + "     U   U     \n"
                    + "               \n"
                    + "               \n"
                    + "               \n"
                    + "\n"
                    + "- Player 2's Turn ///\n"
                    + "\n"
                    + "- Message:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "                                                                          "
                    + "                          \n"
                    + "\n"
                    + "- Hints:\n"
                    + "- Player 1                                        - Player 2              "
                    + "                          \n"
                    + "- Game over.                                      - You can move to [up, "
                    + "down, left, right].        \n"
                    + "                                                  - You smell a wumpus "
                    + "nearby.                      \n"
                    + "\n"
                    + "- Enter 'm' to move, 'a' to shoot an arrow:\n"
                    + "(- Or 'restart' to restart, 'new' to start a new game, 'q' to quit the "
                    + "game)\n";
    assertEquals(expected, out.toString());
  }


}